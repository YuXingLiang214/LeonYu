import{a as p,b as U,u as x,o as i,c,d as r,e,ab as R,g as w,E as C}from"./index-fa93e99f.js";import{v as F}from"./el-loading-4cb344f5.js";import{_ as N}from"./pageContainer-05e0e423.js";import{a as h,E as q}from"./el-col-a9c4bd71.js";import{E as B,a as $}from"./el-form-item-ada387d0.js";import{E as I}from"./_plugin-vue_export-helper-3666fca8.js";import{E as O}from"./el-input-84ed1cb2.js";import{j as P}from"./article-bc5afa20.js";/* empty css                   */import"./_baseClone-875524b2.js";const X={__name:"UserPassword",setup(T){const o=p({old_pwd:"",new_pwd:"",re_pwd:""}),f={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(d,l,t)=>{l===o.value.old_pwd?t(new Error("原密码和新密码不能一样!")):t()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(d,l,t)=>{l!==o.value.new_pwd?t(new Error("新密码和确认再次输入的新密码不一样!")):t()},trigger:"blur"}]},n=p(),g=U(),m=x(),u=p(!1),v=async()=>{u.value=!0,await n.value.validate()&&(await P(o.value),C({type:"success",message:"更换密码成功"}),m.setToken(""),m.setUser({}),g.push("/login")),u.value=!1},b=()=>{n.value.resetFields()};return(d,l)=>{const t=O,s=B,_=I,E=$,S=h,V=q,k=N,y=F;return i(),c(k,{title:"重置密码"},{default:r(()=>[e(V,null,{default:r(()=>[e(S,{span:12},{default:r(()=>[R((i(),c(E,{model:o.value,rules:f,ref_key:"formRef",ref:n,"label-width":"100px",size:"large"},{default:r(()=>[e(s,{label:"原密码",prop:"old_pwd"},{default:r(()=>[e(t,{modelValue:o.value.old_pwd,"onUpdate:modelValue":l[0]||(l[0]=a=>o.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"新密码",prop:"new_pwd"},{default:r(()=>[e(t,{modelValue:o.value.new_pwd,"onUpdate:modelValue":l[1]||(l[1]=a=>o.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"确认新密码",prop:"re_pwd"},{default:r(()=>[e(t,{modelValue:o.value.re_pwd,"onUpdate:modelValue":l[2]||(l[2]=a=>o.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,null,{default:r(()=>[e(_,{onClick:v,type:"primary"},{default:r(()=>[w("修改密码")]),_:1}),e(_,{onClick:b},{default:r(()=>[w("重置")]),_:1})]),_:1})]),_:1},8,["model"])),[[y,u.value]])]),_:1})]),_:1})]),_:1})}}};export{X as default};
