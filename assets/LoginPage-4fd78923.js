import{r as S,a as _,w as B,u as $,b as F,o as g,c as w,d as l,e,f as n,g as i,i as E,h as x,E as N,j as b,l as v,p as P,k as z}from"./index-7ce17a2f.js";import{E as T,a as j}from"./el-col-d4972922.js";import{E as M}from"./el-checkbox-b7862b46.js";import{E as A,a as D}from"./el-form-item-5a4f6302.js";import{E as G}from"./el-link-515524a8.js";import{_ as H,E as J}from"./_plugin-vue_export-helper-5235e3f8.js";import{E as K}from"./el-input-71426026.js";/* empty css                   */import"./isEqual-67302d76.js";import"./_baseClone-278008d9.js";const O=({username:u,password:o,repassword:s})=>S.post("/api/reg",{username:u,password:o,repassword:s}),Q=({username:u,password:o})=>S.post("/api/login",{username:u,password:o});const C=u=>(P("data-v-75747935"),u=u(),z(),u),W=C(()=>x("h1",null,"注册",-1)),X=C(()=>x("h1",null,"登录",-1)),Y={class:"flex"},Z={__name:"LoginPage",setup(u){let o=_(!1);const s=_({userName:"",initpsw:"",repsw:""}),y={userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{pattern:/^\S{5,10}$/,message:"用户名必须是5-10位的字符",trigger:"blur"}],initpsw:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是6-15位的字符",trigger:"blur"}],repsw:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:(f,a,p)=>{a!==s.value.initpsw?p(new Error("两次输入的密码不一致")):p()},trigger:"blur"}]},m=_(),R=async()=>{await m.value.validate(),await O({username:s.value.userName,password:s.value.initpsw,repassword:s.value.repsw}),N.success("注册成功"),o.value=!1};B(o,()=>{s.value={userName:"",initpsw:"",repsw:""}});const I=$(),U=F(),h=async()=>{await m.value.validate();const f=await Q({username:s.value.userName,password:s.value.initpsw});I.setToken(f.data.token),N.success("登录成功"),U.push("/")};return(f,a)=>{const p=j,t=A,d=K,V=J,c=G,k=D,L=M,q=T;return g(),w(q,{class:"login-page"},{default:l(()=>[e(p,{span:12,class:"bg"}),e(p,{span:6,offset:3,class:"form"},{default:l(()=>[n(o)?(g(),w(k,{key:0,ref_key:"form",ref:m,size:"large",autocomplete:"off",model:s.value,rules:y},{default:l(()=>[e(t,null,{default:l(()=>[W]),_:1}),e(t,{prop:"userName"},{default:l(()=>[e(d,{"prefix-icon":n(b),placeholder:"请输入用户名",modelValue:s.value.userName,"onUpdate:modelValue":a[0]||(a[0]=r=>s.value.userName=r)},null,8,["prefix-icon","modelValue"])]),_:1}),e(t,{prop:"initpsw"},{default:l(()=>[e(d,{"prefix-icon":n(v),type:"password",placeholder:"请输入密码",modelValue:s.value.initpsw,"onUpdate:modelValue":a[1]||(a[1]=r=>s.value.initpsw=r)},null,8,["prefix-icon","modelValue"])]),_:1}),e(t,{prop:"repsw"},{default:l(()=>[e(d,{"prefix-icon":n(v),type:"password",placeholder:"请输入再次密码",modelValue:s.value.repsw,"onUpdate:modelValue":a[2]||(a[2]=r=>s.value.repsw=r)},null,8,["prefix-icon","modelValue"])]),_:1}),e(t,null,{default:l(()=>[e(V,{onClick:R,class:"button",type:"primary","auto-insert-space":""},{default:l(()=>[i(" 注册 ")]),_:1})]),_:1}),e(t,{class:"flex"},{default:l(()=>[e(c,{type:"info",underline:!1,onClick:a[3]||(a[3]=r=>E(o)?o.value=!1:o=!1)},{default:l(()=>[i(" ← 返回 ")]),_:1})]),_:1})]),_:1},8,["model"])):(g(),w(k,{key:1,ref_key:"form",ref:m,size:"large",autocomplete:"off",model:s.value,rules:y},{default:l(()=>[e(t,null,{default:l(()=>[X]),_:1}),e(t,{prop:"userName"},{default:l(()=>[e(d,{"prefix-icon":n(b),placeholder:"请输入用户名",modelValue:s.value.userName,"onUpdate:modelValue":a[4]||(a[4]=r=>s.value.userName=r)},null,8,["prefix-icon","modelValue"])]),_:1}),e(t,{prop:"initpsw"},{default:l(()=>[e(d,{name:"password","prefix-icon":n(v),type:"password",placeholder:"请输入密码",modelValue:s.value.initpsw,"onUpdate:modelValue":a[5]||(a[5]=r=>s.value.initpsw=r)},null,8,["prefix-icon","modelValue"])]),_:1}),e(t,{class:"flex"},{default:l(()=>[x("div",Y,[e(L,null,{default:l(()=>[i("记住我")]),_:1}),e(c,{type:"primary",underline:!1},{default:l(()=>[i("忘记密码？")]),_:1})])]),_:1}),e(t,null,{default:l(()=>[e(V,{onClick:h,class:"button",type:"primary","auto-insert-space":""},{default:l(()=>[i("登录")]),_:1})]),_:1}),e(t,{class:"flex"},{default:l(()=>[e(c,{type:"info",underline:!1,onClick:a[6]||(a[6]=r=>E(o)?o.value=!0:o=!0)},{default:l(()=>[i(" 注册 → ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},pe=H(Z,[["__scopeId","data-v-75747935"]]);export{pe as default};
